<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAIN</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-gray-100">
    <img src="{{ url_for('static', path='/logo.png') }}" alt="로고" class="w-48 mb-48">
    <form id="searchForm" class="flex flex-col items-center bg-white p-8 rounded shadow-md">
        <input type="text" id="characterName" name="characterName" placeholder="캐릭터명 입력" class="border rounded px-3 py-2 mb-4 w-64">
        <select id="serverId" name="serverId" class="border rounded px-3 py-2 mb-4 w-64">
            <option value="all">전체</option>
            {% for server_id, server_name in servers.items() %}
                <option value="{{ server_id }}">{{ server_name }}</option>
            {% endfor %}
        </select>
        <div>
            <button type="submit" id="characterSearchButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">캐릭터 검색</button>
            <button type="submit" id="adventureSearchButton" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">모험단 검색</button>
        </div>
    </form>
</body>

<script>
    const characterSearchButton = document.getElementById('characterSearchButton');
    const adventureSearchButton = document.getElementById('adventureSearchButton');
    const searchForm = document.getElementById('searchForm');
    const characterNameInput = document.getElementById('characterName');

    characterSearchButton.addEventListener('click', (event) => {
        event.preventDefault();
        if (validateForm()) {
            searchForm.action = "/search"; // 캐릭터 검색 경로
            searchForm.submit();
        }
    });

    adventureSearchButton.addEventListener('click', (event) => {
        event.preventDefault();
        if (validateForm()) {
            searchForm.action = "/search"; // 모험단 검색 경로
            characterNameInput.name = "adventureName"; // 입력 필드 이름 변경
            searchForm.submit();
        }
    });

    function validateForm() {
        if (characterNameInput.value.trim() === "") {
            return false;
        }
        return true;
    }
</script>
</html>